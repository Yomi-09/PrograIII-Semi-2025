{% extends "base.html" %}

{% block title %}Gestión de Usuarios{% endblock %}

{% block content %}
    <div class="header">
        <h2 id="form-title">Registrar Nuevo Usuario</h2>
        <div>
            <span>Bienvenido, **{{ session.nombre }}** ({{ session.usuario }})</span>
            <a href="{{ url_for('logout') }}" style="margin-left: 15px; color: #d9534f;">Cerrar Sesión</a>
        </div>
    </div>
    
    <div id="alert-message" class="alert" style="display: none;"></div>

    <form id="usuarios-form">
        <div style="display: flex; gap: 20px;">
            <div class="form-group" style="flex: 1;">
                <label for="usuario">Usuario <span style="color: red;">*</span>:</label>
                <input type="text" id="usuario" required maxlength="35">
            </div>
            <div class="form-group" style="flex: 1;">
                <label for="clave">Clave <span style="color: red;">*</span>:</label>
                <input type="password" id="clave" required maxlength="35">
            </div>
        </div>
        
        <div class="form-group">
            <label for="nombre">Nombre Completo <span style="color: red;">*</span>:</label>
            <input type="text" id="nombre" required maxlength="85">
        </div>

        <div style="display: flex; gap: 20px;">
            <div class="form-group" style="flex: 2;">
                <label for="direccion">Dirección:</label>
                <input type="text" id="direccion" maxlength="100">
            </div>
            <div class="form-group" style="flex: 1;">
                <label for="telefono">Teléfono:</label>
                <input type="tel" id="telefono" maxlength="9">
            </div>
        </div>

        <div style="text-align: right;">
            <button type="button" id="cancel-edit-btn" class="btn-danger" style="display: none; margin-right: 10px;">Cancelar Edición</button>
            <button type="submit" id="form-submit-btn">Registrar Usuario</button>
        </div>
    </form>
    
    <hr>
    
    <div class="header" style="justify-content: space-between;">
        <h3>Listado de Usuarios</h3>
        <div style="display: flex; gap: 5px;">
            <input type="text" id="search-input" placeholder="Buscar por Nombre o Usuario..." style="width: 250px;">
            <button id="search-btn">Buscar</button>
            <button id="clear-search-btn" class="btn-danger">Limpiar</button>
        </div>
    </div>

    <div id="usuarios-list-container">
        <p>Cargando usuarios...</p>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
{% endblock %}